!!!
%html
  %head
    %meta{content: "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %title BookStore
    %meta{content: "width=device-width,initial-scale=1", name: "viewport"}/
    %meta{name: "viewport", content: "width=device-width"}
    %title Bookstore
    %link{href: "https://fonts.googleapis.com/css?family=Open+Sans", rel: "stylesheet"}
    = csrf_meta_tags
    = csp_meta_tag
    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = javascript_importmap_tags
    %script{src: "https://use.fontawesome.com/67602d7308.js"}
  %body
    %header.navbar.navbar-default
      .container
        .navbar-header
          %button.navbar-toggle.pull-left{type: "button", 'data-toggle': "collapse", 'data-target': "#navbar"}
            %span.sr-only
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          %a.navbar-brand Bookstore
          %a.shop-link.pull-right.visible-xs{href: carts_path}
            %span.shop-icon
              %span.shop-quantity #{Cart.where(session: session[:current_user]).select(:book_id).distinct.count}
        %a.shop-link.pull-right.hidden-xs{href: carts_path}
          %span.shop-icon
            %span.shop-quantity #{Cart.where(session: session[:current_user]).select(:book_id).distinct.count}
        #navbar.navbar-collapse.collapse.pl-30{'aria-expanded': "false"}
          .visible-xs
            %button.close{type: "button", 'aria-label': "Close"}
              %span{'aria-hidden': "true"} &times;
            %ul.nav.navbar-nav
              %li
                = link_to "Home", root_path
              %li
                %a{type: "button", 'data-toggle': "collapse", href: "#menu", 'aria-expanded': "false", 'aria-controls': "menu"} Shop
                %ul#menu.collapse.list-unstyled.pl-30.mb-10{'aria-expanded': "false"}
                  %li
                    %a.collapse-link{href: category_books_path("All", sort: "Newest first")} All
                  - Category.all.order("title").each do |category|
                    %li
                      %a.collapse-link{href: category_books_path("#{category.title}", sort: "newest_first")} #{category.title}
                  %li.divider{role: "separator"}
                  %li
                    %a.collapse-link
                      = link_to "Log out", destroy_user_session_path, data: { "turbo-method": :delete }
              %li
                - if current_user.nil?
                  %a.collapse-link{href: new_user_session_path} Sign In
                - else
                  %a.collapse-link{href: edit_user_registration_path}= current_user.email
          .hidden-xs
            %ul.nav.navbar-nav
              %li
                = link_to "Home", root_path
              %li.dropdown
                %a.dropdown-toggle{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"} Shop
                %ul.dropdown-menu
                  %li
                    %a{href: category_books_path("All", sort: "Newest first")} All
                  - Category.all.order("title").each do |category|
                    %li
                      %a{href: category_books_path("#{category.title}", sort: "newest_first")} #{category.title}
                  %li.divider{role: "separator"}
                  %li
                    %a
                      = link_to "Log out", destroy_user_session_path, data: { "turbo-method": :delete }
              - if current_user&.admin?
                %li
                  %a.collapse-link{href: admin_root_path} Admin
              %li
                - if current_user.nil?
                  %a.collapse-link{href: new_user_session_path} Sign In
                - else
                  %a.collapse-link{href: edit_user_registration_path}= current_user.email
    %main.container
      = yield
      .text-center
        %p.notice= notice
        %p.alert= alert
    %footer.navbar-inverse
      .container
        .row
          .col-sm-9
            %ul.list-inline.general-align.mb-25
              %li
                %a.nav-link{href: root_path} Home
              %li
                %a.nav-link{href: category_books_path("All", sort: "Newest First")} Shop
              %li
                %a.nav-link{href: "#"} Orders
              %li
                %a.nav-link{href: "#"} Settings
          .col-sm-3
            %p.general-nav-mail support@bookstore.com
            %p.general-nav-number (555)-555-5555
            %ul.list-inline.general-align
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-facebook{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-twitter{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-google-plus{'aria-hidden': "true"}
              %li
                %a.nav-link{href: "#"}
                  %i.fa.fa-instagram{'aria-hidden': "true"}
